<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail Game</title>
    <!-- Kita pakai library Prism.js untuk highlight kode -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <style>
        /* --- Style Umum --- */
        body { 
            font-family: sans-serif; 
            margin: 0; 
            background: #2d2d2d; 
            color: #ccc; 
        }
        .container { 
            display: flex; 
            height: 100vh; 
            /* Pastikan container tidak melebihi layar di HP */
            overflow: hidden; 
        }
        .code-section { 
            flex: 1; 
            overflow-y: auto; 
            padding: 1rem; 
        }
        .preview-section { 
            flex: 1; 
            border-left: 2px solid #444; 
            display: flex; 
            flex-direction: column; 
        }
        .preview-section header { 
            background: #444; 
            padding: 1rem; 
            text-align: center; 
        }
        .preview-section iframe { 
            flex-grow: 1; 
            width: 100%; 
            border: none; 
            background: #fff; 
        }
        pre { 
            margin: 0;
            /* Tambahkan scroll horizontal jika kode terlalu panjang */
            overflow-x: auto; 
        }
        .back-link { 
            position: fixed; 
            top: 10px; 
            left: 10px; 
            z-index: 1000; 
            background: #007bff; 
            color: white; 
            padding: 10px; 
            text-decoration: none; 
            border-radius: 5px; 
        }

        /* --- AWAL TAMBAHAN UNTUK RESPONSIVITAS --- */
        /* Media Query untuk layar dengan lebar maksimal 768px (Tablet dan HP) */
        @media (max-width: 768px) {
            .container {
                /* Ubah arah flex dari baris menjadi kolom (menumpuk ke bawah) */
                flex-direction: column;
                /* Height tidak lagi 100vh, biarkan mengikuti konten */
                height: auto;
            }

            .code-section, .preview-section {
                /* Di layar kecil, lebar elemen mengikuti container */
                width: 100%;
                /* Hilangkan flex: 1 agar ukurannya tidak memaksa */
                flex: none;
            }

            .preview-section {
                /* Hilangkan border kiri, ganti dengan border bawah */
                border-left: none;
                border-bottom: 2px solid #444;
            }

            .preview-section iframe {
                /* Berikan tinggi tetap pada iframe di HP agar tidak terlalu kecil */
                height: 50vh; /* 50% dari tinggi layar HP */
            }
        }
        /* --- AKHIR TAMBAHAN UNTUK RESPONSIVITAS --- */

    </style>
</head>
<body>

    <a href="index.html" class="back-link">‚Üê Kembali</a>

    <div class="container">
        <div class="code-section">
            <h2>Kode Sumber</h2>
            <h3>HTML (index.html)</h3>
            <pre><code class="language-html" id="code-html"></code></pre>

            <h3>CSS (style.css)</h3>
            <pre><code class="language-css" id="code-css"></code></pre>

            <h3>JavaScript (script.js)</h3>
            <pre><code class="language-javascript" id="code-js"></code></pre>
        </div>

        <div class="preview-section">
            <header><h2>Preview Game</h2></header>
            <iframe id="game-frame" src=""></iframe>
        </div>
    </div>

    <!-- Script Prism.js untuk highlight kode -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    
    <!-- Script utama kita -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Ambil nama game dari URL, misal: detail.html?game=game-1
            const urlParams = new URLSearchParams(window.location.search);
            const gameName = urlParams.get('game');

            if (!gameName) {
                document.body.innerHTML = '<h1>Error: Game tidak ditemukan!</h1>';
                return;
            }

            // Path ke folder game
            const gamePath = `games/${gameName}/`;

            // Elemen-elemen yang akan kita isi
            const codeHtml = document.getElementById('code-html');
            const codeCss = document.getElementById('code-css');
            const codeJs = document.getElementById('code-js');
            const gameFrame = document.getElementById('game-frame');

            // Set src iframe untuk preview
            gameFrame.src = gamePath + 'index.html';

            // Fungsi untuk mengambil dan menampilkan kode
            async function loadCode(fileName, elementId) {
                try {
                    const response = await fetch(gamePath + fileName);
                    if (!response.ok) {
                        throw new Error(`Gagal mengambil ${fileName}`);
                    }
                    const code = await response.text();
                    document.getElementById(elementId).textContent = code;
                } catch (error) {
                    document.getElementById(elementId).textContent = `// Gagal memuat kode: ${error.message}`;
                }
            }

            // Muat semua kode
            loadCode('index.html', 'code-html');
            loadCode('style.css', 'code-css');
            loadCode('script.js', 'code-js');

            // Highlight semua kode yang sudah dimuat
            Prism.highlightAll();
        });
    </script>
</body>
</html>